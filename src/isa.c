#include "isa.h"struct instruction_set_struct {    instruction_id nins;    instruction_function * ins_list;};instruction_set * create_instruction_set(instruction_id nins) {    if ( nins == 0 )        goto cleanup;    instruction_set * new_inss = calloc( 1, sizeof(instruction_set) );        if ( new_inss == NULL )        goto cleanup;        new_inss->nins = nins;    new_inss->ins_list = calloc( nins, sizeof(instruction_function) );        if ( new_inss->ins_list == NULL )        goto cleanup;        return new_inss;cleanup:    if ( new_inss != NULL )        free(new_inss);    return NULL;}void destroy_instruction_set(instruction_set * isa){    if ( isa == NULL )        return;    free(isa->ins_list);    free(isa);}int add_instruction_to_set  ( instruction_set * isa, instruction_id id, instruction_function func ){    if ( isa == NULL || id >= isa->nins || func == NULL )        goto cleanup;        isa->ins_list[id] = func;    return 0;cleanup:    return -1;}int del_instruction_from_set( instruction_set * isa, instruction_id id) {    if ( isa == NULL || id >= isa->nins )        goto cleanup;        isa->ins_list[id] = NULL;    return 0;cleanup:    return -1;}instruction_function get_instruction_function ( instruction_set * isa, instruction_id id) {    if ( isa == NULL || id >= isa->nins )        goto cleanup;    instruction_function ret = isa->ins_list[id];    if ( ret == NULL )        goto cleanup;        return ret;cleanup:    return NULL;}